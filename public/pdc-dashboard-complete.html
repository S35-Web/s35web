<!DOCTYPE html>
<html lang="es" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>S-35 | Panel de Control</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        :root{
            --bg: #0b0c0f;
            --panel: #111319;
            --elev: rgba(255,255,255,0.06);
            --text: #e6e7ea;
            --muted: #a9aeb6;
            --primary: #0a84ff;
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
            --card: #0f1116;
            --border: rgba(255,255,255,0.12);
            --accent: #8b5cf6;
        }
        [data-theme="light"]{
            --bg: #f6f7f9;
            --panel: #ffffff;
            --elev: rgba(0,0,0,0.04);
            --text: #0e1013;
            --muted: #4b5563;
            --primary: #0a84ff;
            --success: #16a34a;
            --warning: #d97706;
            --danger: #dc2626;
            --card: #ffffff;
            --border: rgba(0,0,0,0.08);
            --accent: #7c3aed;
        }
        *{ box-sizing: border-box; }
        body{ margin:0; font-family:"Helvetica Neue", Helvetica, Arial, sans-serif; font-weight:300; color:var(--text); background:var(--bg); }
        .app{ display:grid; grid-template-rows: 64px 1fr; min-height:100vh; }
        .topbar{
            display:flex; align-items:center; gap:16px; padding:0 20px; background:var(--panel); border-bottom:1px solid var(--border);
        }
        .brand{ display:flex; align-items:center; gap:12px; }
        .brand img{ height:26px; }
        .brand span{ letter-spacing:.4px; font-size:15px; color:var(--muted); }
        .actions{ margin-left:auto; display:flex; align-items:center; gap:10px; }
        .iconbtn{ height:36px; width:36px; display:grid; place-items:center; border:1px solid var(--border); background:transparent; color:var(--text); border-radius:10px; cursor:pointer; }
        .container{ display:grid; grid-template-columns: 300px 1fr; min-height:0; }
        .sidebar{ border-right:1px solid var(--border); background:var(--panel); padding:16px; }
        .nav{ display:grid; gap:6px; }
        .nav a{ display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:10px; color:var(--text); text-decoration:none; border:1px solid transparent; cursor:pointer; }
        .nav a.active, .nav a:hover{ background:var(--elev); border-color:var(--border); }
        .content{ padding:22px; }
        .grid{ display:grid; grid-template-columns: repeat(12, 1fr); gap:16px; }
        .card{ background:var(--card); border:1px solid var(--border); border-radius:14px; padding:16px; }
        .card h3{ margin:0 0 8px; font-weight:400; letter-spacing:.3px; }
        .muted{ color:var(--muted); font-size:13px; }
        .kpis{ display:grid; grid-template-columns: repeat(4,1fr); gap:16px; margin-bottom:16px; }
        .kpi{ background:var(--card); border:1px solid var(--border); border-radius:14px; padding:16px; display:grid; gap:6px; }
        .kpi .val{ font-size:22px; font-weight:400; }
        .badge{ display:inline-grid; place-items:center; padding:2px 8px; border-radius:999px; font-size:12px; }
        .b-success{ background:rgba(34,197,94,.12); color:#34d399; }
        .b-warning{ background:rgba(245,158,11,.12); color:#fbbf24; }
        .b-danger{ background:rgba(239,68,68,.12); color:#fca5a5; }
        .b-primary{ background:rgba(10,132,255,.12); color:#60a5fa; }
        table{ width:100%; border-collapse:collapse; }
        th, td{ text-align:left; padding:10px 8px; border-bottom:1px solid var(--border); font-size:14px; }
        .row-actions{ display:flex; gap:8px; }
        .btn{ padding:8px 10px; border-radius:10px; border:1px solid var(--border); background:transparent; color:var(--text); cursor:pointer; }
        .btn.primary{ background:var(--primary); border-color:transparent; color:#fff; }
        .btn.success{ background:var(--success); border-color:transparent; color:#fff; }
        .btn.danger{ background:var(--danger); border-color:transparent; color:#fff; }
        .btn.link{ border:none; color:var(--primary); background:transparent; }
        .toolbar{ display:flex; gap:10px; align-items:center; margin-bottom:12px; }
        .search{ flex:1; height:36px; border-radius:10px; border:1px solid var(--border); background:transparent; color:var(--text); padding:0 12px; }
        .table-card{ overflow:auto; }
        .form-grid{ display:grid; grid-template-columns: repeat(2,1fr); gap:16px; }
        .form-group{ display:grid; gap:6px; }
        .form-group label{ font-size:12px; color:var(--muted); letter-spacing:.3px; }
        .form-group input, .form-group select, .form-group textarea{ 
            padding:10px 12px; border-radius:8px; border:1px solid var(--border); 
            background:transparent; color:var(--text); font-size:14px;
        }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus{ 
            outline:none; border-color:var(--primary); 
        }
        .modal{ position:fixed; inset:0; background:rgba(0,0,0,.8); display:grid; place-items:center; z-index:1000; }
        .modal-content{ background:var(--card); border:1px solid var(--border); border-radius:16px; padding:24px; width:min(90vw,800px); max-height:90vh; overflow:auto; }
        .modal-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:16px; }
        .modal-title{ font-size:18px; font-weight:400; }
        .close-btn{ background:none; border:none; color:var(--muted); cursor:pointer; font-size:20px; }
        .section{ display:none; }
        .section.active{ display:block; }
    </style>
</head>
<body>
    <div class="app">
        <div class="topbar">
            <div class="brand">
                <img src="Assets/Logotipo Principal.png" alt="S-35">
                <span>S-35 Panel de Control</span>
            </div>
            <div class="actions">
                <button class="iconbtn" id="themeBtn"><i class="fa-solid fa-moon"></i></button>
                <button class="iconbtn" id="logoutBtn"><i class="fa-solid fa-sign-out-alt"></i></button>
            </div>
        </div>
        
        <div class="container">
            <div class="sidebar">
                <div class="nav">
                    <a data-section="dashboard" class="active">
                        <i class="fa-solid fa-chart-line"></i>
                        Dashboard
                    </a>
                    <a data-section="users">
                        <i class="fa-solid fa-users"></i>
                        Usuarios
                    </a>
                    <a data-section="products">
                        <i class="fa-solid fa-box"></i>
                        Productos
                    </a>
                    <a data-section="clients">
                        <i class="fa-solid fa-building"></i>
                        Clientes
                    </a>
                    <a data-section="inventory">
                        <i class="fa-solid fa-warehouse"></i>
                        Inventario
                    </a>
                    <a data-section="reports">
                        <i class="fa-solid fa-chart-bar"></i>
                        Reportes
                    </a>
                </div>
            </div>
            
            <div class="content">
                <!-- Dashboard Section -->
                <div id="dashboard" class="section active">
                    <div class="kpis">
                        <div class="kpi">
                            <div class="muted">Usuarios Activos</div>
                            <div class="val" id="totalUsers">0</div>
                        </div>
                        <div class="kpi">
                            <div class="muted">Ventas del Mes</div>
                            <div class="val" id="totalSales">$0</div>
                        </div>
                        <div class="kpi">
                            <div class="muted">Productos</div>
                            <div class="val" id="totalProducts">0</div>
                        </div>
                        <div class="kpi">
                            <div class="muted">Sistema</div>
                            <div class="val" id="systemStatus">99.9%</div>
                        </div>
                    </div>
                    
                    <div class="grid">
                        <div class="card" style="grid-column: span 8;">
                            <h3>Actividad Reciente</h3>
                            <div class="table-card">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Usuario</th>
                                            <th>Acción</th>
                                            <th>Fecha</th>
                                            <th>IP</th>
                                            <th>Estatus</th>
                                        </tr>
                                    </thead>
                                    <tbody id="recentActivity">
                                        <!-- Se llena dinámicamente -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="card" style="grid-column: span 4;">
                            <h3>Estado del Sistema</h3>
                            <div style="display:grid; gap:12px;">
                                <div style="display:flex; justify-content:space-between; align-items:center;">
                                    <span>API</span>
                                    <span class="badge b-success">Operativo</span>
                                </div>
                                <div style="display:flex; justify-content:space-between; align-items:center;">
                                    <span>Base de Datos</span>
                                    <span class="badge b-success">Operativo</span>
                                </div>
                                <div style="display:flex; justify-content:space-between; align-items:center;">
                                    <span>Email</span>
                                    <span class="badge b-warning">Lento</span>
                                </div>
                                <div style="display:flex; justify-content:space-between; align-items:center;">
                                    <span>Almacenamiento</span>
                                    <span class="badge b-primary">75%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Users Section -->
                <div id="users" class="section">
                    <div class="card">
                        <div class="toolbar">
                            <input type="text" class="search" placeholder="Buscar usuarios...">
                            <button class="btn primary" onclick="openModal('newUserModal')">
                                <i class="fa-solid fa-plus"></i> Nuevo Usuario
                            </button>
                        </div>
                        <div class="table-card">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Usuario</th>
                                        <th>Tipo</th>
                                        <th>Email</th>
                                        <th>Último Acceso</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="usersTable">
                                    <!-- Se llena dinámicamente -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Products Section -->
                <div id="products" class="section">
                    <div class="card">
                        <div class="toolbar">
                            <input type="text" class="search" placeholder="Buscar productos...">
                            <button class="btn primary" onclick="openModal('newProductModal')">
                                <i class="fa-solid fa-plus"></i> Nuevo Producto
                            </button>
                        </div>
                        <div class="table-card">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Producto</th>
                                        <th>Categoría</th>
                                        <th>Precio</th>
                                        <th>Stock</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="productsTable">
                                    <!-- Se llena dinámicamente -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Clients Section -->
                <div id="clients" class="section">
                    <div class="card">
                        <div class="toolbar">
                            <input type="text" class="search" placeholder="Buscar clientes...">
                            <button class="btn primary" onclick="openModal('newClientModal')">
                                <i class="fa-solid fa-plus"></i> Nuevo Cliente
                            </button>
                        </div>
                        <div class="table-card">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Cliente</th>
                                        <th>Email</th>
                                        <th>Teléfono</th>
                                        <th>Dirección</th>
                                        <th>Registro</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="clientsTable">
                                    <!-- Se llena dinámicamente -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Inventory Section -->
                <div id="inventory" class="section">
                    <div class="card">
                        <div class="toolbar">
                            <input type="text" class="search" placeholder="Buscar en inventario...">
                            <button class="btn primary" onclick="openModal('adjustInventoryModal')">
                                <i class="fa-solid fa-edit"></i> Ajustar Inventario
                            </button>
                        </div>
                        <div class="table-card">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Producto</th>
                                        <th>SKU</th>
                                        <th>Stock Actual</th>
                                        <th>Stock Mínimo</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="inventoryTable">
                                    <!-- Se llena dinámicamente -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Reports Section -->
                <div id="reports" class="section">
                    <div class="grid">
                        <div class="card" style="grid-column: span 6;">
                            <h3>Resumen de Ventas</h3>
                            <div style="display:grid; gap:12px;">
                                <div style="display:flex; justify-content:space-between;">
                                    <span>Total Pedidos:</span>
                                    <span id="totalOrders">0</span>
                                </div>
                                <div style="display:flex; justify-content:space-between;">
                                    <span>Total Cotizaciones:</span>
                                    <span id="totalQuotes">0</span>
                                </div>
                                <div style="display:flex; justify-content:space-between;">
                                    <span>Total Clientes:</span>
                                    <span id="totalClients">0</span>
                                </div>
                                <div style="display:flex; justify-content:space-between;">
                                    <span>Ingresos Totales:</span>
                                    <span id="totalRevenue">$0</span>
                                </div>
                            </div>
                        </div>
                        <div class="card" style="grid-column: span 6;">
                            <h3>Productos Más Vendidos</h3>
                            <div style="display:grid; gap:8px;">
                                <div style="display:flex; justify-content:space-between; padding:8px; background:var(--elev); border-radius:8px;">
                                    <span>Basecoat Blanco Absoluto</span>
                                    <span>45 unidades</span>
                                </div>
                                <div style="display:flex; justify-content:space-between; padding:8px; background:var(--elev); border-radius:8px;">
                                    <span>Estuco Base Pro+</span>
                                    <span>32 unidades</span>
                                </div>
                                <div style="display:flex; justify-content:space-between; padding:8px; background:var(--elev); border-radius:8px;">
                                    <span>Ultraforce Adhesivo</span>
                                    <span>28 unidades</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modales -->
    
    <!-- Nuevo Usuario -->
    <div id="newUserModal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Nuevo Usuario</h3>
                <button class="close-btn" onclick="closeModal('newUserModal')">&times;</button>
            </div>
            <div class="form-grid">
                <div class="form-group">
                    <label>Nombre de Usuario</label>
                    <input type="text" id="userName" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="userEmail" required>
                </div>
                <div class="form-group">
                    <label>Contraseña</label>
                    <input type="password" id="userPassword" required>
                </div>
                <div class="form-group">
                    <label>Tipo de Usuario</label>
                    <select id="userType" required>
                        <option value="pdc">PDC</option>
                        <option value="pos">POS</option>
                        <option value="client">Cliente</option>
                        <option value="colaborador">Colaborador</option>
                    </select>
                </div>
            </div>
            <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:20px;">
                <button class="btn" onclick="closeModal('newUserModal')">Cancelar</button>
                <button class="btn primary" onclick="createUser()">Crear Usuario</button>
            </div>
        </div>
    </div>

    <!-- Editar Usuario -->
    <div id="editUserModal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Editar Usuario</h3>
                <button class="close-btn" onclick="closeModal('editUserModal')">&times;</button>
            </div>
            <form id="editUserForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Nombre de Usuario</label>
                        <input type="text" id="editUserName" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="editUserEmail" required>
                    </div>
                    <div class="form-group">
                        <label>Tipo de Usuario</label>
                        <select id="editUserType" required>
                            <option value="pdc">PDC</option>
                            <option value="pos">POS</option>
                            <option value="client">Cliente</option>
                            <option value="colaborador">Colaborador</option>
                        </select>
                    </div>
                </div>
                <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:20px;">
                    <button class="btn" onclick="closeModal('editUserModal')">Cancelar</button>
                    <button class="btn primary" onclick="updateUser()">Actualizar Usuario</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Nuevo Producto -->
    <div id="newProductModal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Nuevo Producto</h3>
                <button class="close-btn" onclick="closeModal('newProductModal')">&times;</button>
            </div>
            <div class="form-grid">
                <div class="form-group">
                    <label>Nombre del Producto</label>
                    <input type="text" id="productName" required>
                </div>
                <div class="form-group">
                    <label>Categoría</label>
                    <select id="productCategory" required>
                        <option value="Base">Base</option>
                        <option value="Acabado">Acabado</option>
                        <option value="Adhesivo">Adhesivo</option>
                        <option value="Piso">Piso</option>
                        <option value="Especializado">Especializado</option>
                        <option value="Premium">Premium</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Precio</label>
                    <input type="number" id="productPrice" step="0.01" required>
                </div>
                <div class="form-group">
                    <label>Costo</label>
                    <input type="number" id="productCost" step="0.01">
                </div>
                <div class="form-group">
                    <label>SKU</label>
                    <input type="text" id="productSku">
                </div>
                <div class="form-group">
                    <label>Stock Inicial</label>
                    <input type="number" id="productStock" required>
                </div>
                <div class="form-group">
                    <label>Stock Mínimo</label>
                    <input type="number" id="productMinStock" required>
                </div>
                <div class="form-group" style="grid-column: span 2;">
                    <label>Descripción</label>
                    <textarea id="productDescription" rows="3"></textarea>
                </div>
            </div>
            <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:20px;">
                <button class="btn" onclick="closeModal('newProductModal')">Cancelar</button>
                <button class="btn primary" onclick="createProduct()">Crear Producto</button>
            </div>
        </div>
    </div>

    <!-- Editar Producto -->
    <div id="editProductModal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Editar Producto</h3>
                <button class="close-btn" onclick="closeModal('editProductModal')">&times;</button>
            </div>
            <form id="editProductForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Nombre del Producto</label>
                        <input type="text" id="editProductName" required>
                    </div>
                    <div class="form-group">
                        <label>Categoría</label>
                        <select id="editProductCategory" required>
                            <option value="Base">Base</option>
                            <option value="Acabado">Acabado</option>
                            <option value="Adhesivo">Adhesivo</option>
                            <option value="Piso">Piso</option>
                            <option value="Especializado">Especializado</option>
                            <option value="Premium">Premium</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Precio</label>
                        <input type="number" id="editProductPrice" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label>Costo</label>
                        <input type="number" id="editProductCost" step="0.01">
                    </div>
                    <div class="form-group">
                        <label>SKU</label>
                        <input type="text" id="editProductSku">
                    </div>
                    <div class="form-group">
                        <label>Stock</label>
                        <input type="number" id="editProductStock" required>
                    </div>
                    <div class="form-group">
                        <label>Stock Mínimo</label>
                        <input type="number" id="editProductMinStock" required>
                    </div>
                    <div class="form-group" style="grid-column: span 2;">
                        <label>Descripción</label>
                        <textarea id="editProductDescription" rows="3"></textarea>
                    </div>
                </div>
                <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:20px;">
                    <button class="btn" onclick="closeModal('editProductModal')">Cancelar</button>
                    <button class="btn primary" onclick="updateProduct()">Actualizar Producto</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Nuevo Cliente -->
    <div id="newClientModal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Nuevo Cliente</h3>
                <button class="close-btn" onclick="closeModal('newClientModal')">&times;</button>
            </div>
            <div class="form-grid">
                <div class="form-group">
                    <label>Nombre/Razón Social</label>
                    <input type="text" id="clientName" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="clientEmail" required>
                </div>
                <div class="form-group">
                    <label>Teléfono</label>
                    <input type="tel" id="clientPhone" required>
                </div>
                <div class="form-group">
                    <label>RFC</label>
                    <input type="text" id="clientRfc">
                </div>
                <div class="form-group" style="grid-column: span 2;">
                    <label>Dirección</label>
                    <textarea id="clientAddress" rows="2"></textarea>
                </div>
            </div>
            <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:20px;">
                <button class="btn" onclick="closeModal('newClientModal')">Cancelar</button>
                <button class="btn primary" onclick="createClient()">Crear Cliente</button>
            </div>
        </div>
    </div>

    <!-- Editar Cliente -->
    <div id="editClientModal" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Editar Cliente</h3>
                <button class="close-btn" onclick="closeModal('editClientModal')">&times;</button>
            </div>
            <form id="editClientForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Nombre/Razón Social</label>
                        <input type="text" id="editClientName" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="editClientEmail" required>
                    </div>
                    <div class="form-group">
                        <label>Teléfono</label>
                        <input type="tel" id="editClientPhone" required>
                    </div>
                    <div class="form-group">
                        <label>RFC</label>
                        <input type="text" id="editClientRfc">
                    </div>
                    <div class="form-group" style="grid-column: span 2;">
                        <label>Dirección</label>
                        <textarea id="editClientAddress" rows="2"></textarea>
                    </div>
                </div>
                <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:20px;">
                    <button class="btn" onclick="closeModal('editClientModal')">Cancelar</button>
                    <button class="btn primary" onclick="updateClient()">Actualizar Cliente</button>
                </div>
            </form>
        </div>
    </div>

    <script src="pdc-functions.js"></script>
    <script>
        // Toggle theme
        document.getElementById('themeBtn').addEventListener('click', ()=>{
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        });

        // Load saved theme
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme) {
            document.documentElement.setAttribute('data-theme', savedTheme);
        }
    </script>
</body>
</html>
