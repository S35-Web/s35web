<!DOCTYPE html>
<html lang="es" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>S-35 | Panel de Cliente</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        :root{
            --bg: #0b0c0f;
            --panel: #111319;
            --elev: rgba(255,255,255,0.06);
            --text: #e6e7ea;
            --muted: #a9aeb6;
            --primary: #0a84ff;
            --ok: #22c55e;
            --warn: #f59e0b;
            --danger: #ef4444;
            --card: #0f1116;
            --border: rgba(255,255,255,0.12);
        }
        [data-theme="light"]{
            --bg: #f6f7f9;
            --panel: #ffffff;
            --elev: rgba(0,0,0,0.04);
            --text: #0e1013;
            --muted: #4b5563;
            --primary: #0a84ff;
            --ok: #16a34a;
            --warn: #d97706;
            --danger: #dc2626;
            --card: #ffffff;
            --border: rgba(0,0,0,0.08);
        }
        *{ box-sizing: border-box; }
        body{ margin:0; font-family:"Helvetica Neue", Helvetica, Arial, sans-serif; font-weight:300; color:var(--text); background:var(--bg); }
        .app{ display:grid; grid-template-rows: 64px 1fr; min-height:100vh; }
        .topbar{
            display:flex; align-items:center; gap:16px; padding:0 20px; background:var(--panel); border-bottom:1px solid var(--border);
        }
        .brand{ display:flex; align-items:center; gap:12px; }
        .brand img{ height:26px; }
        .brand span{ letter-spacing:.4px; font-size:15px; color:var(--muted); }
        .actions{ margin-left:auto; display:flex; align-items:center; gap:10px; }
        .iconbtn{ height:36px; width:36px; display:grid; place-items:center; border:1px solid var(--border); background:transparent; color:var(--text); border-radius:10px; cursor:pointer; }
        .container{ display:grid; grid-template-columns: 260px 1fr; min-height:0; }
        .sidebar{ border-right:1px solid var(--border); background:var(--panel); padding:16px; }
        .nav{ display:grid; gap:6px; }
        .nav a{ display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:10px; color:var(--text); text-decoration:none; border:1px solid transparent; }
        .nav a.active, .nav a:hover{ background:var(--elev); border-color:var(--border); }
        .content{ padding:22px; }
        .grid{ display:grid; grid-template-columns: repeat(12, 1fr); gap:16px; }
        .card{ background:var(--card); border:1px solid var(--border); border-radius:14px; padding:16px; }
        .card h3{ margin:0 0 8px; font-weight:400; letter-spacing:.3px; }
        .muted{ color:var(--muted); font-size:13px; }
        .kpis{ display:grid; grid-template-columns: repeat(4,1fr); gap:16px; margin-bottom:16px; }
        .kpi{ background:var(--card); border:1px solid var(--border); border-radius:14px; padding:16px; display:grid; gap:6px; }
        .kpi .val{ font-size:22px; font-weight:400; }
        .badge{ display:inline-grid; place-items:center; padding:2px 8px; border-radius:999px; font-size:12px; }
        .b-ok{ background:rgba(34,197,94,.12); color:#34d399; }
        .b-warn{ background:rgba(245,158,11,.12); color:#fbbf24; }
        .b-danger{ background:rgba(239,68,68,.12); color:#fca5a5; }
        table{ width:100%; border-collapse:collapse; }
        th, td{ text-align:left; padding:10px 8px; border-bottom:1px solid var(--border); font-size:14px; }
        .row-actions{ display:flex; gap:8px; }
        .btn{ padding:8px 10px; border-radius:10px; border:1px solid var(--border); background:transparent; color:var(--text); cursor:pointer; }
        .btn.primary{ background:var(--primary); border-color:transparent; color:#fff; }
        .btn.link{ border:none; color:var(--primary); background:transparent; }
        .toolbar{ display:flex; gap:10px; align-items:center; margin-bottom:12px; }
        .search{ flex:1; height:36px; border-radius:10px; border:1px solid var(--border); background:transparent; color:var(--text); padding:0 12px; }
        .table-card{ overflow:auto; }
        @media(max-width: 960px){ .container{ grid-template-columns: 1fr; } .sidebar{ position:sticky; top:0; z-index:2; } .kpis{ grid-template-columns: repeat(2,1fr);} }
    </style>
</head>
<body>
    <div class="app">
        <header class="topbar">
            <div class="brand">
                <img src="Assets/Logotipo Principal.png" alt="S-35"/>
                <span>Panel de Cliente</span>
            </div>
            <div class="actions">
                <button class="iconbtn" id="themeBtn" title="Tema"><i class="fa-solid fa-circle-half-stroke"></i></button>
                <button class="iconbtn" id="logoutBtn" title="Salir"><i class="fa-solid fa-right-from-bracket"></i></button>
            </div>
        </header>
        <div class="container">
            <aside class="sidebar">
                <nav class="nav">
                    <a href="#resumen" class="active"><i class="fa-solid fa-gauge"></i> Resumen</a>
                    <a href="#pedidos"><i class="fa-solid fa-box"></i> Pedidos</a>
                    <a href="#facturas"><i class="fa-solid fa-file-invoice"></i> Facturas</a>
                    <a href="#surtido"><i class="fa-solid fa-truck"></i> Estatus de surtido</a>
                    <a href="#soporte"><i class="fa-solid fa-headset"></i> Soporte</a>
                </nav>
            </aside>
            <main class="content">
                <section id="resumen">
                    <div class="kpis">
                        <div class="kpi"><span class="muted">Pedidos en curso</span><span class="val" id="kpiOpen">—</span></div>
                        <div class="kpi"><span class="muted">Último pedido</span><span class="val" id="kpiLast">—</span></div>
                        <div class="kpi"><span class="muted">Saldo</span><span class="val" id="kpiBalance">—</span></div>
                        <div class="kpi"><span class="muted">Facturas pendientes</span><span class="val" id="kpiInvoices">—</span></div>
                    </div>

                    <div class="grid">
                        <div class="card" style="grid-column: span 7;">
                            <h3>Pedidos recientes</h3>
                            <div class="table-card">
                                <table id="tblRecent">
                                    <thead>
                                        <tr><th>Folio</th><th>Fecha</th><th>Productos</th><th>Total</th><th>Estatus</th><th></th></tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                        <div class="card" style="grid-column: span 5;">
                            <h3>Facturas</h3>
                            <div class="table-card">
                                <table id="tblInvoices">
                                    <thead>
                                        <tr><th>Factura</th><th>Fecha</th><th>Importe</th><th>Estatus</th></tr>
                                    </thead>
                                    <tbody></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="pedidos" style="margin-top:16px;">
                    <div class="toolbar">
                        <input class="search" placeholder="Buscar pedidos…"/>
                        <button class="btn primary"><i class="fa-solid fa-plus"></i> Nuevo pedido</button>
                    </div>
                    <div class="card table-card">
                        <table id="tblOrders">
                            <thead>
                                <tr><th>Folio</th><th>Fecha</th><th>Productos</th><th>Total</th><th>Estatus</th><th></th></tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </section>

                <section id="facturas" style="margin-top:16px;">
                    <div class="card table-card">
                        <table id="tblAllInvoices">
                            <thead>
                                <tr><th>Factura</th><th>Fecha</th><th>Importe</th><th>Estatus</th><th></th></tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </section>

                <section id="surtido" style="margin-top:16px;">
                    <div class="card">
                        <h3>Estatus de surtido</h3>
                        <p class="muted">Seguimiento de preparación y envío por pedido.</p>
                        <div id="fulfillment"></div>
                    </div>
                </section>

                <section id="soporte" style="margin-top:16px;">
                    <div class="card">
                        <h3>Soporte</h3>
                        <p class="muted">¿Dudas con tus pedidos o facturación? Escríbenos desde el formulario de contacto del sitio o al correo soporte@s35.com.</p>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <script>
        // Tema claro/oscuro
        (function(){
            const root = document.documentElement;
            const saved = localStorage.getItem('clientTheme');
            if(saved){ root.setAttribute('data-theme', saved); }
            document.getElementById('themeBtn').addEventListener('click', ()=>{
                const now = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
                root.setAttribute('data-theme', now);
                localStorage.setItem('clientTheme', now);
            });
        })();

        // Mock data (hasta conectar API real)
        const recentOrders = [
            { folio:'S35-10234', fecha:'2025-09-05', productos:'Basecoat + Estuco', total:'$12,450', estatus:'En preparación' },
            { folio:'S35-10212', fecha:'2025-08-21', productos:'Porcelánico', total:'$4,980', estatus:'Entregado' }
        ];
        const invoices = [
            { folio:'F-9041', fecha:'2025-09-06', importe:'$12,450', estatus:'Pendiente' },
            { folio:'F-8980', fecha:'2025-08-22', importe:'$4,980', estatus:'Pagado' }
        ];

        function statusBadge(s){
            if(/entregado|pagado/i.test(s)) return '<span class="badge b-ok">'+s+'</span>';
            if(/prepar|proceso|pendiente/i.test(s)) return '<span class="badge b-warn">'+s+'</span>';
            return '<span class="badge b-danger">'+s+'</span>';
        }

        function fill(){
            // KPIs
            document.getElementById('kpiOpen').textContent = recentOrders.filter(o=>/prepar|curso/i.test(o.estatus)).length;
            document.getElementById('kpiLast').textContent = recentOrders[0]?.folio || '—';
            document.getElementById('kpiBalance').textContent = '$0';
            document.getElementById('kpiInvoices').textContent = invoices.filter(i=>/pend/i.test(i.estatus)).length;

            const tbodyR = document.querySelector('#tblRecent tbody');
            tbodyR.innerHTML = recentOrders.map(o=>`<tr>
                <td>${o.folio}</td><td>${o.fecha}</td><td>${o.productos}</td><td>${o.total}</td><td>${statusBadge(o.estatus)}</td>
                <td class="row-actions"><button class="btn link">Ver</button></td>
            </tr>`).join('');

            const tbodyI = document.querySelector('#tblInvoices tbody');
            tbodyI.innerHTML = invoices.map(i=>`<tr>
                <td>${i.folio}</td><td>${i.fecha}</td><td>${i.importe}</td><td>${statusBadge(i.estatus)}</td>
            </tr>`).join('');

            document.querySelector('#tblOrders tbody').innerHTML = tbodyR.innerHTML;
            document.querySelector('#tblAllInvoices tbody').innerHTML = tbodyI.innerHTML;

            // Fulfillment demo
            document.getElementById('fulfillment').innerHTML = recentOrders.map(o=>`<div class="card" style="margin-top:10px;">
                <div style="display:flex; justify-content:space-between; align-items:center;">
                    <div><strong>${o.folio}</strong> <span class="muted">${o.fecha}</span></div>
                    <div>${statusBadge(o.estatus)}</div>
                </div>
                <div class="muted" style="margin-top:6px;">${o.productos}</div>
                <div style="margin-top:10px; height:8px; background:var(--elev); border-radius:999px; overflow:hidden;">
                    <div style="width:${/Entregado/i.test(o.estatus)?'100%':/prepar|curso/i.test(o.estatus)?'60%':'20%'}; height:100%; background:var(--primary);"></div>
                </div>
            </div>`).join('');
        }

        // Logout
        document.getElementById('logoutBtn').addEventListener('click', ()=>{
            localStorage.removeItem('clientToken');
            window.location.href = 'client-login.html';
        });

        fill();
    </script>
</body>
</html>


